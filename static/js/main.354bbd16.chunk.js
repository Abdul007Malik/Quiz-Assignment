(this["webpackJsonpquiz-assessment"]=this["webpackJsonpquiz-assessment"]||[]).push([[0],{50:function(e,t,n){e.exports=n(87)},55:function(e,t,n){},56:function(e,t,n){},62:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(25),s=n.n(o),i=(n(55),n(11)),c=n(12),u=n(14),l=n(15),p=n(5),d=(n(56),n(13)),m=n(21),h=n(22),f=function(e){var t=e.item,n=t.id,r=t.options,o=t.onChange,s=void 0===o?function(){return console.trace("undefined onchange function")}:o,i=null;return a.a.createElement("div",{className:"form-group"},r.map((function(e){return i="string"===typeof e?e:e.id,a.a.createElement(h.a,{key:i,type:"radio",label:"string"===typeof e?e:e.label,value:i,name:n,onChange:function(e){return s(e.target.value)}})})))},b=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.options,r=e.onChange,o=e.disabled,s={},i=function(e,t){switch(e){case"radio":case"multiple":return a.a.createElement(f,{item:t})}}(this.props.type,{id:t,onChange:r,options:n});return o&&(s.pointerEvents="none",s.opacity=.4),a.a.createElement("div",{className:"options",style:s},i)}}]),n}(a.a.Component),v=n(88),g=n(92),E=(n(62),n(46)),S=n.n(E),y=function(e,t){return S()(e,t)},O=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={answer:null,submitted:!1},e.onSubmit=function(){e.setState({submitted:!0}),setTimeout((function(){return e.props.onSubmit({answer:e.state.answer,questionId:e.props.id})}),2e3)},e.onChange=function(t){e.setState({answer:t})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.question,r=e.options,o=e.type,s=e.isLast,i=e.correct_answer,c=this.state.answer,u="string"===typeof i?i:i.join(", ");return a.a.createElement(v.a,{className:"item"},a.a.createElement("h3",null,"Question ".concat(t,") ").concat(n)," "),this.state.submitted&&(y(c,i)?a.a.createElement("p",{className:"text-success"},"Correct Answer"):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"text-danger"},"Incorrect Answer"),a.a.createElement("p",null,"Correct Answer is ",u))),a.a.createElement(b,{disabled:this.state.submitted,id:t,type:o,options:r,onChange:this.onChange}),a.a.createElement(g.a,{disabled:this.state.submitted,onClick:this.onSubmit},s?"Submit Quiz":"Next Question"))}}]),n}(a.a.Component),w=n(49),j=n(18),T=n.n(j),_=0,N=1,q=2,C=3,R=function(e){return function(t){switch(e){case _:t({type:"STAGE_SET",stage:N});break;case N:t({type:"STAGE_FINISH",stage:q});break;default:t({type:"STAGE_ERROR",error:"Sorry the page you are trying to access doesnot exist"})}}},I=function(e,t){return function(n){e&&n({type:"SCORE_ADD",answer:e,score:t}),n((function(e,t){var n,r=t().question,a=r.current,o=r.questions.findIndex((function(e){return e.id===a})),s=null===(n=r.questions[o+1])||void 0===n?void 0:n.id;-1!==o?o===r.questions.length-1?(e({type:"QUESTIONS_POINTER_SET",current:null}),e(R(N))):e({type:"QUESTIONS_POINTER_SET",current:s}):console.trace("Invalid state:",o,a,r.questions)}))}},A=n(89),k=n(93),Q=n(47),U=n.n(Q),F=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).parseQuestion=function(e){return e&&Object(m.a)({},e)},e.onSubmit=function(t){return function(t){if(null===t||void 0===t?void 0:t.answer)e.props.addScore(t,1);else{if(!window.confirm("Do you want to skip this question"))return;e.props.addScore(null,0)}}},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.onFetchQuestions()}},{key:"render",value:function(){var e=this,t=this.props.questions,n=t.findIndex((function(t){return t.id===e.props.current})),r=this.parseQuestion(this.props.questions[n]),o=t.length-n,s=100*n/t.length;return a.a.createElement(v.a,{className:"questions grid col-sm-8 shadow p-3 mb-5 bg-white rounded"},this.props.loading?a.a.createElement(A.a,{animation:"border",variant:"warning"}):a.a.createElement(a.a.Fragment,null,a.a.createElement(k.a,{variant:"success",now:s}),r?a.a.createElement(O,Object.assign({key:r.id,isLast:1===o},r,{options:U()(r.options),onSubmit:this.onSubmit(r)})):"No question available"))}}]),n}(r.Component),x=Object(d.b)((function(e){var t=e.question,n=void 0===t?{}:t;return{questions:n.questions,loading:n.loading,current:n.current}}),(function(e){return{onFetchQuestions:function(){return e((function(e){e({type:"QUESTIONS_FETCH_START"}),T.a.get("https://opentdb.com/api.php?amount=5&category=15&difficulty=easy&type=multiple").then((function(t){var n=t.data.results.map((function(e,t){return Object(m.a)({},e,{options:[].concat(Object(w.a)(e.incorrect_answers),[e.correct_answer]),id:t+1})}));e({type:"QUESTIONS_FETCH_SUCCESS",questions:n})})).catch((function(t){console.log(t),e({type:"QUESTIONS_FETCH_FAIL",error:"Failed to fetch questions"})}))}))},addScore:function(t,n){return e(I(t,n))}}}))(F),G=n(91),D=(n(81),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={name:""},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.state.name;return a.a.createElement(v.a,{className:"user-register"},a.a.createElement("div",{className:"auth-wrapper"},a.a.createElement("div",{className:"shadow p-3 mb-5 bg-white rounded auth-inner"},a.a.createElement(G.a,{className:"",onSubmit:function(n){n.preventDefault(),e.props.onSubmit({name:t})}},a.a.createElement("h3",null,"Register"),a.a.createElement("div",{className:"user-form"},a.a.createElement("div",{className:"form-group"},a.a.createElement("input",{name:"user",value:t,className:"form-control",placeholder:"Your Name",onChange:function(t){return e.setState({name:t.target.value})}})),a.a.createElement(g.a,{type:"submit",className:"btn btn-primary btn-block"},"Register"))))))}}]),n}(a.a.Component)),H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(t){t&&t.name?e.props.registerUser(t):alert("Name is required")},e}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement(D,{onSubmit:this.onSubmit})}}]),n}(r.Component),L=Object(d.b)(null,(function(e){return{registerUser:function(t){return e((n=t,function(e){T.a.post("http://localhost:8000/register",n).then((function(t){e({type:"USER_REGISTER",user:Object(m.a)({},n)}),e(R(_))})).catch((function(t){e({type:"USER_REGISTER_FAIL",error:"Failed to register. Please try again..."})}))}));var n}}}))(H),P=n(90),z=(n(82),function(e){var t;return a.a.createElement(P.a,{className:"shadow p-3 mb-5 bg-white rounded"},a.a.createElement("label",null,"Congratulation ",null===(t=e.user)||void 0===t?void 0:t.name,", You have scored ",e.score," out of ",e.totalQuestions," (Attempted: ",e.totalAnswers,")"))}),M=Object(d.b)((function(e){var t=e.common.current,n=e.report;return{answers:n.answers,score:n.score,questions:e.question.questions,user:t}}))((function(e){var t=e.answers,n=e.questions,r=e.user,o=(null===n||void 0===n?void 0:n.length)||0,s=(null===t||void 0===t?void 0:t.length)||0,i=function(e,t){var n=null;return Array.isArray(e)&&e.reduce((function(e,r){var a,o;return"undefined"!==typeof(null===(a=n=t.find((function(e){return e.questionId===r.id})))||void 0===a?void 0:a.answer)&&y(null===(o=n)||void 0===o?void 0:o.answer,null===r||void 0===r?void 0:r.correct_answer)?e+1:e}),0)}(n,t);return a.a.createElement(v.a,{className:"report"},a.a.createElement(z,{score:i,user:r,totalQuestions:o,totalAnswers:s}))})),B=Object(d.b)((function(e){var t;return{user:null===(t=e.common)||void 0===t?void 0:t.current}}))((function(e){return null!=e.user?a.a.createElement(p.b,{path:e.path,exact:e.exact,component:e.component}):a.a.createElement(p.a,{to:"/"})})),J=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){e.currentStage!==this.props.currentStage&&(this.props.currentStage===_&&this.props.history.push("/"),this.props.currentStage===N&&this.props.history.push("/question"),this.props.currentStage===q&&this.props.history.push("/report"),this.props.currentStage===C&&this.props.history.push("/error"))}},{key:"getPageTile",value:function(e){switch(e){case 1:return"Questions";case 2:return"Report";default:return"Register"}}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(p.b,{exact:!0,path:"/",component:L}),a.a.createElement(B,{path:"/question",component:x}),a.a.createElement(B,{path:"/report",component:M}))}}]),n}(a.a.Component),W=Object(d.b)((function(e){return{currentStage:e.stage.current}}))(Object(p.f)(J));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=n(33),$=n(8),K={questions:[],loading:!1,current:1},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"QUESTIONS_FETCH_START":return Object.assign({},e,{loading:!0});case"QUESTIONS_FETCH_SUCCESS":return Object.assign({},e,{questions:t.questions,loading:!1});case"QUESTIONS_FETCH_FAIL":return Object.assign({},e,{loading:!1,error:t.error});case"QUESTIONS_POINTER_SET":return Object.assign({},e,{current:t.current});default:return e}},X=Object($.c)({stage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{current:_,finish:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STAGE_SET":return Object.assign({},e,{current:t.stage});case"STAGE_FINISH":return Object.assign({},e,{current:q,finish:!0});case"STAGE_ERROR":return Object.assign({},e,{current:C,error:t.error});default:return e}},question:V,common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{current:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REGISTER":return Object.assign({},e,{current:t.user});case"USER_LOGOUT":return Object.assign({},e,{current:null});default:return e}},report:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{score:null,answers:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SCORE_ADD":return Object.assign({},e,{score:e.score+t.score,answers:e.answers.concat(t.answer)});case"SCORE_RESET":return Object.assign({},e,{score:null,answers:[]});default:return e}}});var Z=n(29),ee=n(48),te=n.n(ee),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Y.a)({reducer:X,middleware:Object(Y.b)(),preloadedState:e});return t}({}),re=new te.a(T.a,{delayResponse:500});re.onPost("http://localhost:8000/register").reply(200,{id:1,name:""}),re.onAny().passThrough(),s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Z.a,null,a.a.createElement(d.a,{store:ne},a.a.createElement(W,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.354bbd16.chunk.js.map